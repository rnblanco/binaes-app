"use strict";(self.webpackChunkpk_thunder_frontend=self.webpackChunkpk_thunder_frontend||[]).push([[109],{7109:(ze,E,r)=>{r.r(E),r.d(E,{ExemplarsModule:()=>$e});var d=r(6895),h=r(2248),L=r(9908),m=r(6894),e=r(8274),O=r(414),C=r(805),T=r(4178);function J(i,n){if(1&i&&(e.ynx(0),e._UZ(1,"img",7),e.ALo(2,"photo"),e.BQk()),2&i){const t=e.oxw(2).rowData;e.xp6(1),e.Q6J("src",e.lcZ(2,1,null==t?null:t.imagen),e.LSH)}}function Z(i,n){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"date"),e.BQk()),2&i){const t=e.oxw(2).rowData;e.xp6(1),e.hij(" ",e.xi3(2,1,null==t?null:t.f_publicacion,"dd-MM-yyyy")," ")}}function R(i,n){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"titlecase"),e.BQk()),2&i){const t=e.oxw(2).rowData;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==t||null==t.EDITORIAL?null:t.EDITORIAL.editorial1)," ")}}function U(i,n){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"titlecase"),e.BQk()),2&i){const t=e.oxw(2).rowData;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==t||null==t.FORMATOEJEMPLAR?null:t.FORMATOEJEMPLAR.formato)," ")}}function K(i,n){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"titlecase"),e.BQk()),2&i){const t=e.oxw(2).rowData;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==t||null==t.IDIOMAEJEMPLAR?null:t.IDIOMAEJEMPLAR.idioma)," ")}}function H(i,n){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"titlecase"),e.BQk()),2&i){const t=e.oxw(2).rowData;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==t||null==t.COLECCION?null:t.COLECCION.nombre)," ")}}function D(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.hij(" ",null==t||null==t.AUTOR?null:t.AUTOR.nombre," ")}}function Q(i,n){if(1&i&&(e.ynx(0),e.YNc(1,D,2,1,"div",8),e.BQk()),2&i){const t=e.oxw(2).rowData;e.xp6(1),e.Q6J("ngForOf",t.AUTORxEJEMPLAR)}}function B(i,n){if(1&i&&(e.TgZ(0,"div",10)(1,"span",11),e._uU(2),e.qZA()()),2&i){const t=n.$implicit;e.xp6(2),e.Oqu(null==t?null:t.p_clave)}}function G(i,n){if(1&i&&(e.ynx(0),e.YNc(1,B,3,1,"div",9),e.BQk()),2&i){const t=e.oxw(2).rowData;e.xp6(1),e.Q6J("ngForOf",t.P_CLAVExEJEMPLAR)}}function j(i,n){if(1&i&&(e.TgZ(0,"label")(1,"b"),e._uU(2,"ISBN:"),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",null==t?null:t.etiqueta,"")}}function k(i,n){if(1&i&&(e.TgZ(0,"label")(1,"b"),e._uU(2,"ISSN:"),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",null==t?null:t.etiqueta,"")}}function V(i,n){if(1&i&&(e.TgZ(0,"label")(1,"b"),e._uU(2,"DOI:"),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",null==t?null:t.etiqueta,"")}}function q(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,j,4,1,"label",12),e.YNc(2,k,4,1,"label",12),e.YNc(3,V,4,1,"label",12),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf",1===(null==t?null:t.id_tipoEtiqueta)),e.xp6(1),e.Q6J("ngIf",2===(null==t?null:t.id_tipoEtiqueta)),e.xp6(1),e.Q6J("ngIf",3===(null==t?null:t.id_tipoEtiqueta))}}function Y(i,n){if(1&i&&(e.ynx(0),e.YNc(1,q,4,3,"div",8),e.BQk()),2&i){const t=e.oxw(2).rowData;e.xp6(1),e.Q6J("ngForOf",t.ETIQUETASxEJEMPLAR)}}function $(i,n){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit,o=e.oxw().rowData;e.xp6(1),e.hij(" ",o[t.field]," ")}}function z(i,n){if(1&i&&(e.TgZ(0,"td",4),e.YNc(1,J,3,3,"ng-container",5),e.YNc(2,Z,3,4,"ng-container",5),e.YNc(3,R,3,3,"ng-container",5),e.YNc(4,U,3,3,"ng-container",5),e.YNc(5,K,3,3,"ng-container",5),e.YNc(6,H,3,3,"ng-container",5),e.YNc(7,Q,2,1,"ng-container",5),e.YNc(8,G,2,1,"ng-container",5),e.YNc(9,Y,2,1,"ng-container",5),e.YNc(10,$,2,1,"ng-container",6),e.qZA()),2&i){const t=n.$implicit;e.Udp("width",t.width,"px"),e.Q6J("ngSwitch",t.field),e.xp6(1),e.Q6J("ngSwitchCase","imagen"),e.xp6(1),e.Q6J("ngSwitchCase","f_publicacion"),e.xp6(1),e.Q6J("ngSwitchCase","EDITORIAL.editorial1"),e.xp6(1),e.Q6J("ngSwitchCase","FORMATOEJEMPLAR.formato"),e.xp6(1),e.Q6J("ngSwitchCase","IDIOMAEJEMPLAR.idioma"),e.xp6(1),e.Q6J("ngSwitchCase","COLECCION.nombre"),e.xp6(1),e.Q6J("ngSwitchCase","autorE"),e.xp6(1),e.Q6J("ngSwitchCase","p_clave"),e.xp6(1),e.Q6J("ngSwitchCase","etiqueta_E")}}function W(i,n){1&i&&e.YNc(0,z,11,12,"td",3),2&i&&e.Q6J("ngForOf",n.columns)}let X=(()=>{class i extends L.c{constructor(){super(),this.USER=m.G.USER,this.cols=[{field:"nombre",header:"Nombre",width:120},{field:"imagen",header:"Imagen",width:80},{field:"EDITORIAL.editorial1",header:"Editorial",width:100},{field:"FORMATOEJEMPLAR.formato",header:"Formato",width:90},{field:"IDIOMAEJEMPLAR.idioma",header:"Idioma",width:90},{field:"COLECCION.nombre",header:"Colecci\xf3n",width:120},{field:"p_clave",header:"Palabra(s)",width:120},{field:"autorE",header:"Autor(es)",width:120},{field:"etiqueta_E",header:"Etiqueta(s)",width:120},{field:"f_publicacion",header:"Publicaci\xf3n",width:120}]}ngOnInit(){this.loadAll(),this.user=this.authService.storagedUser,this.breadcrumbService.setItems(this.getBreadCrumbs())}loadAll(){this.list=[],this.loading=!0,this.getPaginationParams(),this.subscription.add(this.catalogService.getByNameWithParams("EJEMPLAR",this.httpParams).subscribe(t=>{this.pagination=t.meta,this.currentPage=this.pagination.currentPage,this.list=t.data,this.loading=!1},()=>this.loading=!1))}onLazyLoad(t){this.paginate(t),this.loadAll()}onNew(){this.user.id_rolUsuario!==m.G.USER&&this.router.navigate([`${this.routeInformation.exemplarPage}/`])}onRowSelect({data:t}){this.user.id_rolUsuario!==m.G.USER&&this.router.navigate([`${this.routeInformation.exemplarPage}/${t.id_Ejemplar}/`])}getBreadCrumbs(){return[{label:"Ejemplares",routerLink:[this.routeInformation.exemplarsPage]}]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-exemplars-page"]],features:[e.qOj],decls:3,vars:8,consts:[[1,"p-mt-4"],["newButtonLabel","Nuevo Ejemplar","type","ejemplares",3,"reloading","globalFilter","rows","pagination","loading","cols","list","showNewButton","onLazyLoad","onRowSelect","onNewClick"],["pTemplate","body"],["class","text-center",3,"ngSwitch","width",4,"ngFor","ngForOf"],[1,"text-center",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[2,"height","8rem",3,"src"],[4,"ngFor","ngForOf"],["class","custom-chip p-mb-2",4,"ngFor","ngForOf"],[1,"custom-chip","p-mb-2"],[1,"custom-chip-label"],[4,"ngIf"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"table-card",1),e.NdJ("onLazyLoad",function(l){return o.onLazyLoad(l)})("onRowSelect",function(l){return o.onRowSelect(l)})("onNewClick",function(){return o.onNew()}),e.YNc(2,W,1,1,"ng-template",2),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("reloading",o.loading)("globalFilter",o.globalFilter)("rows",o.rows)("pagination",o.pagination)("loading",o.loading)("cols",o.cols)("list",o.list)("showNewButton",o.user.id_rolUsuario!==o.USER))},dependencies:[d.sg,d.O5,d.RF,d.n9,d.ED,O.r,C.jx,d.rS,d.uU,T.A],encapsulation:2}),i})();var ee=r(2959),u=r(8203),_=r(529),s=r(433),te=r(4331),b=r(3564),M=r(1740),y=r(5593),w=r(1795),A=r(5722),ie=r(7011),v=r(585),P=r(3388),S=r(3608),f=r(8783),oe=r(7579),ae=r(4986),le=r(5963),re=r(4482),se=r(5032),F=r(5403),de=r(8421),ce=r(9722);let me=(()=>{class i{constructor(t,o,a,l){this.model=t,this.el=o,this.renderer=a,this.tagPipe=l,this.onMask=new e.vpe,this.NewEventSubject=new oe.x,this.NewEvent=this.NewEventSubject.pipe(function pe(i){return(0,re.e)((n,t)=>{let o=!1,a=null,l=null;const p=()=>{if(l?.unsubscribe(),l=null,o){o=!1;const c=a;a=null,t.next(c)}};n.subscribe((0,F.x)(t,c=>{l?.unsubscribe(),o=!0,a=c,l=(0,F.x)(t,p,se.Z),(0,de.Xf)(i(c)).subscribe(l)},()=>{p(),t.complete()},void 0,()=>{a=l=null}))})}(()=>function ne(i=0,n=ae.z){return i<0&&(i=0),(0,le.H)(i,i,n)}(100))),this.NewEvent.subscribe(()=>{this.onMask.emit(this.tagPipe.transform(this.model.model,this.tagType))})}ngOnInit(){this.onMask.emit(this.tagPipe.transform(this.model.model,this.tagType))}onKeyUp(t){t.preventDefault(),this.NewEventSubject.next(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.On),e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(ce.d))},i.\u0275dir=e.lG2({type:i,selectors:[["input","tagMask",""]],hostBindings:function(t,o){1&t&&e.NdJ("keyup",function(l){return o.onKeyUp(l)})},inputs:{tagType:"tagType"},outputs:{onMask:"onMask"}}),i})();var ue=r(3026);const ge=["editorialMultiSelect"],_e=["collectionMultiSelect"],he=["formatoMultiSelect"],fe=["idiomaMultiSelect"],xe=["keywordMultiSelect"],Ee=["authorMultiSelect"],Ce=["tagMultiSelect"];function Te(i,n){1&i&&e._UZ(0,"app-loading",3)}function be(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",23),e._UZ(1,"input",24),e.ALo(2,"uppercase"),e.TgZ(3,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(3);return e.KtG(l.addTag(a.id_tipoEtiqueta))}),e._uU(4," Agregar "),e.qZA()()}if(2&i){const t=e.oxw().$implicit,o=e.oxw(3);e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("placeholder",e.lcZ(2,3,t.tipoEtiqueta1)),e.xp6(2),e.Q6J("disabled",!o.form.valid)}}function Me(i,n){1&i&&(e.TgZ(0,"span",26),e._uU(1," Por favor ingresa un DOI v\xe1lido"),e.qZA())}const ye=function(){return{standalone:!0}};function we(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"input",28),e.NdJ("onMask",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.onMask(a))})("ngModelChange",function(a){e.CHM(t);const l=e.oxw(4);return e.KtG(l.tagName=a)}),e.ALo(2,"uppercase"),e.qZA(),e.TgZ(3,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw(3);return e.KtG(l.addTag(a.id_tipoEtiqueta))}),e._uU(4," Agregar "),e.qZA()()}if(2&i){const t=e.oxw().$implicit,o=e.oxw(3);e.xp6(1),e.s9C("pTooltip",o.isNew?"Se debe registrar el ejemplar primero":""),e.Q6J("placeholder",e.lcZ(2,7,t.tipoEtiqueta1))("tagType",t.id_tipoEtiqueta)("ngModel",o.tagName)("ngModelOptions",e.DdM(9,ye))("disabled",o.isNew),e.xp6(2),e.Q6J("disabled",0===(null==o.tagName?null:o.tagName.length))}}function Ae(i,n){if(1&i&&(e.TgZ(0,"p-tabPanel",19),e.ALo(1,"uppercase"),e.YNc(2,be,5,5,"div",20),e.YNc(3,Me,2,0,"span",21),e.YNc(4,we,5,10,"ng-template",null,22,e.W1O),e.qZA()),2&i){const t=n.$implicit,o=n.index,a=e.MAs(5),l=e.oxw(3);e.s9C("pTooltip",l.isNew?"Se debe registrar el ejemplar primero":""),e.Q6J("header",e.lcZ(1,7,t.tipoEtiqueta1))("selected",0===o)("disabled",l.isNew),e.xp6(2),e.Q6J("ngIf",t.id_tipoEtiqueta===l.DOI)("ngIfElse",a),e.xp6(1),e.Q6J("ngIf",l.validatorService.validField(l.form,"DOI"))}}function ve(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"p-tabView",17),e.NdJ("onChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.tabChange())}),e.YNc(1,Ae,6,9,"p-tabPanel",18),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.tagTypes)}}function Pe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.addKeyword())}),e.qZA()}if(2&i){const t=e.oxw(2);e.MGl("label","Agregar '",t.keywordText,"'")}}function Se(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.addAuthor())}),e.qZA()}if(2&i){const t=e.oxw(2);e.MGl("label","Agregar '",t.authorText,"'")}}function Fe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"form",4,5)(2,"div",6)(3,"label"),e._uU(4,"Etiquetas:"),e.qZA(),e.TgZ(5,"p-multiSelect",7,8),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedTags=a)})("onChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.tagChange(a))}),e.qZA()(),e.TgZ(7,"div",9),e.YNc(8,ve,2,1,"p-tabView",10),e.qZA(),e.TgZ(9,"div",6)(10,"label"),e._uU(11,"Palabras clave:"),e.qZA(),e.TgZ(12,"p-multiSelect",11,12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedKeywords=a)})("onFilter",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.keywordsFilter(a))})("onChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.keywordsChange(a))}),e.YNc(14,Pe,1,1,"ng-template",13),e.qZA()(),e.TgZ(15,"div",14)(16,"label"),e._uU(17,"Autores:"),e.qZA(),e.TgZ(18,"p-multiSelect",15,16),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedAuthors=a)})("onFilter",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.authorFilter(a))})("onChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.authorChange(a))}),e.YNc(20,Se,1,1,"ng-template",13),e.qZA()()()}if(2&i){const t=e.oxw();let o;e.xp6(5),e.s9C("pTooltip",t.isNew?"Se debe registrar el ejemplar primero":""),e.Q6J("options",t.tagsxExemplar)("ngModel",t.selectedTags)("showToggleAll",!1)("showClear",!0)("resetFilterOnHide",!0)("disabled",t.isNew),e.xp6(3),e.Q6J("ngIf",null!==(o=null==t.tagTypes?null:t.tagTypes.length)&&void 0!==o&&o),e.xp6(4),e.s9C("pTooltip",t.isNew?"Se debe registrar el ejemplar primero":""),e.Q6J("options",t.keywords)("ngModel",t.selectedKeywords)("showToggleAll",!1)("showClear",!0)("resetFilterOnHide",!0)("disabled",t.isNew),e.xp6(6),e.s9C("pTooltip",t.isNew?"Se debe registrar el ejemplar primero":""),e.Q6J("options",t.authors)("ngModel",t.selectedAuthors)("showToggleAll",!1)("showClear",!0)("resetFilterOnHide",!0)("disabled",t.isNew)}}function Ne(i,n){1&i&&e._UZ(0,"app-loading",3)}function Ie(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.addEditorial())}),e.qZA()}if(2&i){const t=e.oxw(2);e.MGl("label","Agregar '",t.editorialText,"'")}}function Le(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.addIdioma())}),e.qZA()}if(2&i){const t=e.oxw(2);e.MGl("label","Agregar '",t.idiomaText,"'")}}function Oe(i,n){if(1&i&&(e._UZ(0,"img",55),e.ALo(1,"photo")),2&i){const t=e.oxw(3);let o;e.s9C("src",e.lcZ(1,2,t.uploadFile.uploadedFile[0]),e.LSH),e.s9C("alt",null!==(o=t.uploadFile.uploadedFile[0])&&void 0!==o?o:"No disponible")}}function Je(i,n){if(1&i&&e.YNc(0,Oe,2,4,"img",54),2&i){const t=e.oxw(2);e.Q6J("ngIf",t.uploadFile.uploadedFile[0]&&!t.uploadFile.selectedfiles[0])}}function Ze(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",56)(1,"button",57),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.delete())}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("loading",t.deleteLoading)}}const Re=function(i,n){return{"p-col-6 p-sm-9":i,"p-col-12":n}};function Ue(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"form",4,30)(2,"div",31)(3,"label"),e._uU(4,"Nombre:"),e.qZA(),e.TgZ(5,"div",32)(6,"input",33),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.name=a)}),e.qZA()()(),e.TgZ(7,"div",34)(8,"label"),e._uU(9,"Editorial:"),e.qZA(),e.TgZ(10,"p-multiSelect",35,36),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedEditorial=a)})("onFilter",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.editorialFilter(a))})("onChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.editorialChange(a))}),e.YNc(12,Ie,1,1,"ng-template",13),e.qZA()(),e.TgZ(13,"div",37)(14,"label"),e._uU(15,"Idioma:"),e.qZA(),e.TgZ(16,"p-multiSelect",38,39),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedIdioma=a)})("onFilter",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.idiomaFilter(a))})("onChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.idiomaChange(a))}),e.YNc(18,Le,1,1,"ng-template",13),e.qZA()(),e.TgZ(19,"div",37)(20,"label"),e._uU(21,"Formato:"),e.qZA(),e.TgZ(22,"p-multiSelect",40,41),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedFormato=a)})("onFilter",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.formatoFilter(a))})("onChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.formatoChange(a))}),e.qZA()(),e.TgZ(24,"div",42)(25,"label"),e._uU(26,"Colecci\xf3n:"),e.qZA(),e.TgZ(27,"p-multiSelect",43,44),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedCollection=a)})("onFilter",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.collectionFilter(a))})("onChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.collectionChange(a))}),e.qZA()(),e.TgZ(29,"div",45)(30,"label"),e._uU(31,"Fecha de publicaci\xf3n:"),e.qZA(),e.TgZ(32,"div",46)(33,"p-calendar",47),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.date=a)}),e.qZA()()(),e.TgZ(34,"div",6)(35,"label"),e._uU(36,"Portada:"),e.qZA(),e.TgZ(37,"p-fileUpload",48),e.NdJ("onSelect",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.uploadFile.onSelectFile(a))})("onUpload",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.uploadFile.onUpload(a))}),e.YNc(38,Je,1,1,"ng-template",49),e.qZA()(),e.TgZ(39,"div",50)(40,"div",51)(41,"button",52),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.add())}),e.ALo(42,"addOrEdit"),e.qZA()(),e.YNc(43,Ze,2,1,"div",53),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.name),e.xp6(4),e.Q6J("options",t.editoriales)("ngModel",t.selectedEditorial)("showToggleAll",!1)("showClear",!0)("resetFilterOnHide",!0),e.xp6(6),e.Q6J("options",t.idiomas)("ngModel",t.selectedIdioma)("showToggleAll",!1)("showClear",!0)("resetFilterOnHide",!0),e.xp6(6),e.Q6J("options",t.formatos)("ngModel",t.selectedFormato)("showToggleAll",!1)("showClear",!0)("resetFilterOnHide",!0),e.xp6(5),e.Q6J("options",t.collections)("ngModel",t.selectedCollection)("showToggleAll",!1)("showClear",!0)("resetFilterOnHide",!0),e.xp6(6),e.Q6J("ngModel",t.date)("maxDate",t.maxDate)("selectOtherMonths",!0),e.xp6(4),e.Q6J("showUploadButton",!1)("showCancelButton",!1),e.xp6(3),e.Q6J("ngClass",e.WLB(33,Re,t.user.id_rolUsuario===t.SUPER_ADMIN&&!t.isNew,t.isNew||t.user.id_rolUsuario!==t.SUPER_ADMIN)),e.xp6(1),e.Q6J("loading",t.addLoading)("label",e.lcZ(42,31,t.isNew))("disabled",!t.formIsValid),e.xp6(2),e.Q6J("ngIf",t.user.id_rolUsuario===t.SUPER_ADMIN&&!t.isNew)}}let N=(()=>{class i extends ee.H{constructor(t,o){super(),this.route=t,this.uploadFile=o,this.DOI=te.Q.DOI,this.SUPER_ADMIN=m.G.SUPER_ADMIN,this.isNew=!0,this.addLoading=!1,this.deleteLoading=!1,this.editorialText="",this.selectedEditorial=[],this.collectionText="",this.selectedCollection=[],this.formatoText="",this.selectedFormato=[],this.idiomaText="",this.selectedIdioma=[],this.keywordText="",this.selectedKeywords=[],this.authorText="",this.selectedAuthors=[],this.selectedAuthorsxExemplar=[],this.selectedTags=[]}get formIsValid(){return""!==this.name&&this.selectedEditorial?.length>0&&this.selectedIdioma?.length>0&&this.selectedFormato?.length>0&&this.selectedCollection?.length>0&&void 0!==this.date&&(void 0!==this.uploadFile.uploadedFiles||this.uploadFile.uploadedFile?.length>0)}ngOnInit(){this.loadAll(),this.user=this.authService.storagedUser,this.breadcrumbService.setItems(this.getBreadCrumbs()),this.maxDate=new Date,this.form=this.formBuilder.group({DOI:[void 0,[s.kI.required,s.kI.pattern(this.validatorService.DOIPattern)]]})}loadAll(){this.user.id_rolUsuario===m.G.USER&&(this.messageService.setPayload({type:"warn",title:"Error",body:"No tienes autorizaci\xf3n para ver esta informaci\xf3n"}),setTimeout(()=>{this.router.navigate([u.u.exemplarsPage])},50)),this.subscription.add(this.route.params.subscribe(({id:t})=>{this.loading=!0,this.loadEditoriales(),this.loadIdioma(),this.loadFormatos(),this.loadCollections(),this.loadTagTypes(),t?(this.id=t,this.loadInfo(),this.loadKeywords(),this.loadAuthors(),this.loadTags()):this.loading=!1}))}delete(){this.deleteLoading=!0,this.subscription.add(this.catalogService.deleteOfURL(`EJEMPLAR/${this.id}`).subscribe(()=>{this.messageService.setPayload({type:"success",title:"\xa1Exito!",body:"El ejemplar fue eliminado con \xe9xito"}),setTimeout(()=>{this.router.navigate([u.u.exemplarsPage])},200),this.deleteLoading=!1},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo eliminar el ejemplar"}),this.deleteLoading=!1}))}add(){this.isNew?(void 0!==this.uploadFile.uploadedFiles&&this.uploadFile.uploadFile(),this.addLoading=!0,this.subscription.add(this.catalogService.addOfURL("EJEMPLAR",{nombre:this.name,imagen:this.uploadFile.varbinaryImage,f_publicacion:this.date,id_Idioma:this.selectedIdioma[0],id_Formato:this.selectedFormato[0],id_Editorial:this.selectedEditorial[0],id_coleccionPertenece:this.selectedCollection[0]}).subscribe(()=>{this.messageService.setPayload({type:"success",title:"\xa1Exito!",body:"El ejemplar fue a\xf1adido satifactoriamente"}),setTimeout(()=>{this.router.navigate([u.u.exemplarsPage])},200),this.addLoading=!1},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo a\xf1adir el ejemplar"}),this.addLoading=!1}))):this.update()}update(){void 0!==this.uploadFile.uploadedFiles&&this.uploadFile.uploadFile(),this.addLoading=!0,this.subscription.add(this.catalogService.updateOfURL(`EJEMPLAR/${this.id}`,{id_Ejemplar:this.id,nombre:this.name,imagen:void 0===this.uploadFile.varbinaryImage?btoa(this.uploadFile.uploadedFile[0]):this.uploadFile.varbinaryImage,f_publicacion:this.date,id_Idioma:this.selectedIdioma[0],id_Formato:this.selectedFormato[0],id_Editorial:this.selectedEditorial[0],id_coleccionPertenece:this.selectedCollection[0]}).subscribe(()=>{this.messageService.setPayload({type:"success",title:"\xa1Exito!",body:"El ejemplar fue editado satifactoriamente"}),setTimeout(()=>{this.router.navigate([u.u.exemplarsPage])},200),this.addLoading=!1},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo editar el ejemplar"}),this.addLoading=!1}))}loadInfo(){this.subscription.add(this.catalogService.getByNameWithParams(`EJEMPLAR/${this.id}`).subscribe(t=>{t&&(this.isNew=!1),this.id=t.id_Ejemplar,this.selectedCollection.push(t.COLECCION.id_Coleccion),this.date=new Date(t.f_publicacion),this.name=t.nombre,this.selectedFormato.push(t.FORMATOEJEMPLAR.id_formatoEjemplar),this.selectedIdioma.push(t.IDIOMAEJEMPLAR.id_idiomaEjemplar),this.selectedEditorial.push(t.EDITORIAL.id_Editorial),this.uploadFile.uploadedFile.push(t.imagen),setTimeout(()=>{this.loading=!1},200)},()=>{this.loading=!1,this.router.navigate([u.u.exemplarPage])}))}editorialFilter(t){this.editorialText=t.filter}editorialChange(t){this.selectedEditorial=[t.itemValue]}addEditorial(){this.subscription.add(this.catalogService.addOfURL("EDITORIAL",{editorial1:this.editorialText}).subscribe(t=>{this.loadEditoriales(),this.editorialMultiSelect.close(new Event("close")),this.selectedEditorial=[t.id_Editorial]},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo a\xf1adir la editorial"})}))}loadEditoriales(){this.subscription.add(this.catalogService.getByNameWithParams("EDITORIAL").subscribe(t=>{this.editoriales=t}))}idiomaFilter(t){this.idiomaText=t.filter}idiomaChange(t){this.selectedIdioma=[t.itemValue]}addIdioma(){this.subscription.add(this.catalogService.addOfURL("IDIOMAEJEMPLAR",{idioma:this.idiomaText}).subscribe(t=>{this.loadIdioma(),this.idiomaMultiSelect.close(new Event("close")),this.selectedIdioma=[t.id_idiomaEjemplar]},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo a\xf1adir el idioma"})}))}loadIdioma(){this.subscription.add(this.catalogService.getByNameWithParams("IDIOMAEJEMPLAR").subscribe(t=>{this.idiomas=t}))}formatoFilter(t){this.formatoText=t.filter}formatoChange(t){this.selectedFormato=[t.itemValue]}loadFormatos(){this.subscription.add(this.catalogService.getByNameWithParams("FORMATOEJEMPLAR").subscribe(t=>{this.formatos=t}))}collectionFilter(t){this.collectionText=t.filter}collectionChange(t){this.selectedCollection=[t.itemValue]}loadCollections(){this.subscription.add(this.catalogService.getByNameWithParams("COLECCION").subscribe(t=>{this.collections=t}))}keywordsFilter(t){this.keywordText=t.filter}keywordsChange(t){this.keywords.map(o=>o.id_p_Clave).includes(t.itemValue)&&this.deleteKeyword(t.itemValue)}loadKeywords(){this.subscription.add(this.catalogService.getByNameWithParams("P_CLAVEXEJEMPLAR",(new _.LE).set("id_Ejemplar",this.id)).subscribe(t=>{this.keywords=t,this.selectedKeywords=t.map(o=>o.id_p_Clave)}))}addKeyword(){this.subscription.add(this.catalogService.addOfURL("P_CLAVEXEJEMPLAR",{p_clave:this.keywordText,id_Ejemplar:this.id}).subscribe(()=>{this.loadKeywords()},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo agregar la palabra clave"})}))}deleteKeyword(t){this.subscription.add(this.catalogService.deleteOfURL(`P_CLAVEXEJEMPLAR/${t}`).subscribe(()=>{this.messageService.setPayload({type:"success",title:"\xa1Exito!",body:"La palabra clave fue eliminado con \xe9xito"}),this.loadKeywords()},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo eliminar la palabra clave"})}))}authorFilter(t){this.authorText=t.filter}authorChange(t){if(this.selectedAuthorsxExemplar.includes(t.itemValue)){const o=this.authorsxExemplar.find(a=>a.AUTOR.id_Autor===t.itemValue);this.deleteAuthorToExemplar(o?.id_autorEjemplar||0)}else this.addAuthorToExemplar(t.itemValue)}loadAuthors(){this.subscription.add(this.catalogService.getByNameWithParams("AUTOR").subscribe(t=>{this.authors=t,this.loadSelectedAuthors()}))}loadSelectedAuthors(){this.subscription.add(this.catalogService.getByNameWithParams("AUTORXEJEMPLAR",(new _.LE).set("id_Ejemplar",this.id)).subscribe(t=>{this.authorsxExemplar=t,this.selectedAuthors=this.authorsxExemplar.map(o=>o.AUTOR.id_Autor),this.selectedAuthorsxExemplar=[...this.selectedAuthors]}))}addAuthor(){this.subscription.add(this.catalogService.addOfURL("AUTOR",{nombre:this.authorText,id_Autor:this.id}).subscribe(t=>{this.messageService.setPayload({type:"success",title:"\xa1Exito!",body:"El autor fue agregado con \xe9xito"}),this.addAuthorToExemplar(t.id_Autor)},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo agregar el autor"})}))}deleteAuthorToExemplar(t){this.subscription.add(this.catalogService.deleteOfURL(`AUTORXEJEMPLAR/${t}`).subscribe(()=>{this.loadAuthors()},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo eliminar el autor del ejemplar"})}))}addAuthorToExemplar(t){this.subscription.add(this.catalogService.addOfURL("AUTORXEJEMPLAR",{id_Autor:t,id_Ejemplar:this.id}).subscribe(()=>{this.loadAuthors()},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo agregar el autor"})}))}loadTags(){this.subscription.add(this.catalogService.getByNameWithParams("ETIQUETASXEJEMPLAR/",(new _.LE).set("id_Ejemplar",this.id)).subscribe(t=>{this.tagsxExemplar=t,this.selectedTags=this.tagsxExemplar.map(o=>o.id_etiquetaEjemplar)}))}deleteTagToExemplar(t){this.subscription.add(this.catalogService.deleteOfURL(`ETIQUETASXEJEMPLAR/${t}`).subscribe(()=>{this.messageService.setPayload({type:"success",title:"\xc9xito",body:"Se elimin\xf3 la etiqueta correctamente"}),this.loadTags()},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo eliminar correctamente la etiqueta"})}))}loadTagTypes(){this.subscription.add(this.catalogService.getByNameWithParams("TIPOETIQUETA").subscribe(t=>{this.tagTypes=t}))}addTag(t){this.subscription.add(this.catalogService.addOfURL("ETIQUETASXEJEMPLAR",{id_tipoEtiqueta:t,etiqueta:this.tagName,id_Ejemplar:this.id}).subscribe(o=>{this.messageService.setPayload({type:"success",title:"\xa1Exito!",body:"La etiqueta fue agregada correctamente"}),this.loadTags(),this.tagName=""},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo agregar la etiqueta"})}))}tagChange(t){this.deleteTagToExemplar(t.itemValue)}onMask(t){this.tagName=t}tabChange(){this.tagName=""}getBreadCrumbs(){return[{label:"Ejemplares",routerLink:[this.routeInformation.exemplarsPage]},{label:"Ejemplar",routerLink:[this.routeInformation.exemplarPage]}]}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h.gz),e.Y36(b.R))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-exemplar-page"]],viewQuery:function(t,o){if(1&t&&(e.Gf(ge,5),e.Gf(_e,5),e.Gf(he,5),e.Gf(fe,5),e.Gf(xe,5),e.Gf(Ee,5),e.Gf(Ce,5)),2&t){let a;e.iGM(a=e.CRH())&&(o.editorialMultiSelect=a.first),e.iGM(a=e.CRH())&&(o.collectionMultiSelect=a.first),e.iGM(a=e.CRH())&&(o.formatoMultiSelect=a.first),e.iGM(a=e.CRH())&&(o.idiomaMultiSelect=a.first),e.iGM(a=e.CRH())&&(o.keywordMultiSelect=a.first),e.iGM(a=e.CRH())&&(o.authorMultiSelect=a.first),e.iGM(a=e.CRH())&&(o.tagMultiSelect=a.first)}},features:[e.qOj],decls:6,vars:4,consts:[[1,"card","p-mt-4"],["class","p-d-flex p-ai-center p-jc-center","style","height: 80%",4,"ngIf"],["autocomplete","off","class","p-fluid p-formgrid p-grid p-formgrid-sm p-ml-2 p-mr-2",4,"ngIf"],[1,"p-d-flex","p-ai-center","p-jc-center",2,"height","80%"],["autocomplete","off",1,"p-fluid","p-formgrid","p-grid","p-formgrid-sm","p-ml-2","p-mr-2"],["formModele","ngForm"],[1,"p-field","p-col-12","p-mt-2"],["name","selectedTags","defaultLabel","Elige una etiqueta","optionLabel","etiqueta","optionValue","id_etiquetaEjemplar","emptyFilterMessage","No se encontraron etiquetas","emptyMessage","No se encontraron etiquetas","tooltipPosition","top",3,"options","ngModel","showToggleAll","showClear","resetFilterOnHide","disabled","pTooltip","ngModelChange","onChange"],["tagMultiSelect",""],[1,"p-col-12","p-mb-2"],[3,"onChange",4,"ngIf"],["name","selectedKeywords","defaultLabel","Elige una palabra clave","optionLabel","p_clave","optionValue","id_p_Clave","display","chip","emptyFilterMessage","No se encontraron palabras clave","emptyMessage","No se encontraron palabras clave","tooltipPosition","top",3,"options","ngModel","showToggleAll","showClear","resetFilterOnHide","disabled","pTooltip","ngModelChange","onFilter","onChange"],["keywordMultiSelect",""],["pTemplate","emptyfilter"],[1,"p-field","p-col-12","p-mt-2","p-mb-4"],["name","selectedAuthors","defaultLabel","Elige un autor","optionLabel","nombre","optionValue","id_Autor","emptyFilterMessage","No se encontraron autores","emptyMessage","No se encontraron autores","tooltipPosition","top",3,"options","ngModel","showToggleAll","showClear","resetFilterOnHide","disabled","pTooltip","ngModelChange","onFilter","onChange"],["authorMultiSelect",""],[3,"onChange"],["tooltipPosition","top","class","p-ml-2",3,"header","selected","disabled","pTooltip",4,"ngFor","ngForOf"],["tooltipPosition","top",1,"p-ml-2",3,"header","selected","disabled","pTooltip"],["class","p-inputgroup",3,"formGroup",4,"ngIf","ngIfElse"],["style","color:red",4,"ngIf"],["ISBN_ISNN",""],[1,"p-inputgroup",3,"formGroup"],["formControlName","DOI","pInputText","",3,"placeholder"],["pButton","","type","button",3,"disabled","click"],[2,"color","red"],[1,"p-inputgroup"],["pInputText","","required","","name","tagName","tagMask","","tooltipPosition","top",3,"placeholder","tagType","ngModel","ngModelOptions","disabled","pTooltip","onMask","ngModelChange"],["pButton","","pRipple","","type","button",1,"p-button-primary",3,"label","click"],["formModel","ngForm"],[1,"p-field","p-col-12"],[1,"p-input-icon-right"],["name","name","placeholder","Ej. Cr\xf3nicas de Narnia","pInputText","",3,"ngModel","ngModelChange"],[1,"p-field","p-col-12","p-sm-6","p-mt-2"],["name","selectedEditorial","defaultLabel","Elige una editorial","optionLabel","editorial1","optionValue","id_Editorial",3,"options","ngModel","showToggleAll","showClear","resetFilterOnHide","ngModelChange","onFilter","onChange"],["editorialMultiSelect",""],[1,"p-field","p-col-12","p-sm-3","p-mt-2"],["name","selectedIdioma","defaultLabel","Elige un idioma","optionLabel","idioma","optionValue","id_idiomaEjemplar",3,"options","ngModel","showToggleAll","showClear","resetFilterOnHide","ngModelChange","onFilter","onChange"],["idiomaMultiSelect",""],["name","selectedFormato","defaultLabel","Elige un formato","optionLabel","formato","optionValue","id_formatoEjemplar","emptyFilterMessage","No se encontraron formatos","emptyMessage","No se encontraron formatos",3,"options","ngModel","showToggleAll","showClear","resetFilterOnHide","ngModelChange","onFilter","onChange"],["formatoMultiSelect",""],[1,"p-field","p-col-12","p-sm-7","p-mt-2"],["name","selectedCollection","defaultLabel","Elige una colecci\xf3n","optionLabel","nombre","optionValue","id_Coleccion","emptyFilterMessage","No se encontraron colecciones","emptyMessage","No se encontraron colecciones",3,"options","ngModel","showToggleAll","showClear","resetFilterOnHide","ngModelChange","onFilter","onChange"],["collectionMultiSelect",""],[1,"p-field","p-col-12","p-sm-5","p-mt-2"],[1,"field","col-12","md:col-4"],["name","date","dateFormat","dd-mm-yy",3,"ngModel","maxDate","selectOtherMonths","ngModelChange"],["name","demo[]","chooseLabel","Agregar","invalidFileTypeMessageSummary","{0}: Este formato de archivo no es v\xe1lido.","invalidFileTypeMessageDetail","tipos v\xe1lidos: {0}","accept","image/png",3,"showUploadButton","showCancelButton","onSelect","onUpload"],["pTemplate","content"],[1,"p-col-12","p-grid","p-mt-4","p-ml-0","p-mr-0","p-pl-0","p-pr-0"],[3,"ngClass"],["pButton","","pRipple","","type","button",1,"p-button-success",3,"loading","label","disabled","click"],["class","p-field p-col-6 p-sm-3",4,"ngIf"],["style","height:10em","class","p-ml-2",3,"src","alt",4,"ngIf"],[1,"p-ml-2",2,"height","10em",3,"src","alt"],[1,"p-field","p-col-6","p-sm-3"],["pButton","","pRipple","","type","button","label","Eliminar","icon","pi pi-trash",1,"p-button-danger",3,"loading","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Te,1,0,"app-loading",1),e.YNc(2,Fe,21,22,"form",2),e.qZA(),e.TgZ(3,"div",0),e.YNc(4,Ne,1,0,"app-loading",1),e.YNc(5,Ue,44,36,"form",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading))},dependencies:[d.mk,d.sg,d.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.On,s.F,M.o,C.jx,y.Hq,w.H,A.NU,ie.N,v.f,P.p,S.u,f.xf,f.x4,me,s.sg,s.u,d.gd,ue.p,T.A],encapsulation:2}),i})();const Ke=[{path:"",component:X},{path:"exemplar",component:N},{path:"exemplar/:id",component:N}];let He=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.Bz.forChild(Ke),h.Bz]}),i})();var De=r(6311),Qe=r(8433),Be=r(4466),Ge=r(9423);let je=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez]}),i})();var g=r(9592);const ke={provide:s.Cf,useExisting:(0,e.Gpc)(()=>qe),multi:!0},Ve={pint:/[\d]/,int:/[\d\-]/,pnum:/[\d\.]/,money:/[\d\.\s,]/,num:/[\d\-\.]/,hex:/[0-9a-f]/i,email:/[a-z0-9_\.\-@]/i,alpha:/[a-z_]/i,alphanum:/[a-z0-9_]/i},I={63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35};let qe=(()=>{class i{constructor(t){this.el=t,this.ngModelChange=new e.vpe,this.isAndroid=g.p.isAndroid()}get pattern(){return this._pattern}set pattern(t){this._pattern=t,this.regex=Ve[this._pattern]||this._pattern}isNavKeyPress(t){let o=t.keyCode;return o=g.p.getBrowser().safari&&I[o]||o,o>=33&&o<=40||13==o||9==o||27==o}isSpecialKey(t){let o=t.keyCode||t.charCode;return 9==o||13==o||27==o||16==o||17==o||o>=18&&o<=20||g.p.getBrowser().opera&&!t.shiftKey&&(8==o||o>=33&&o<=35||o>=36&&o<=39||o>=44&&o<=45)}getKey(t){let o=t.keyCode||t.charCode;return g.p.getBrowser().safari&&I[o]||o}getCharCode(t){return t.charCode||t.keyCode||t.which}findDelta(t,o){let a="";for(let l=0;l<t.length;l++)t.substr(0,l)+t.substr(l+t.length-o.length)===o&&(a=t.substr(l,t.length-o.length));return a}isValidChar(t){return this.regex.test(t)}isValidString(t){for(let o=0;o<t.length;o++)if(!this.isValidChar(t.substr(o,1)))return!1;return!0}onInput(t){if(this.isAndroid&&!this.pValidateOnly){let o=this.el.nativeElement.value,a=this.lastValue||"",l=this.findDelta(o,a),p=this.findDelta(a,o);l.length>1||!l&&!p?this.isValidString(o)||(this.el.nativeElement.value=a,this.ngModelChange.emit(a)):p||this.isValidChar(l)||(this.el.nativeElement.value=a,this.ngModelChange.emit(a)),o=this.el.nativeElement.value,this.isValidString(o)&&(this.lastValue=o)}}onKeyPress(t){if(this.isAndroid||this.pValidateOnly)return;let o=g.p.getBrowser(),a=this.getKey(t);if(o.mozilla&&(t.ctrlKey||t.altKey))return;if(17==a||18==a)return;let l=this.getCharCode(t),p=String.fromCharCode(l),c=!0;!o.mozilla&&(this.isSpecialKey(t)||!p)||(c=this.regex.test(p),c||t.preventDefault())}onPaste(t){const o=t.clipboardData||window.clipboardData.getData("text");if(o){const a=o.getData("text");for(let l of a.toString())if(!this.regex.test(l))return void t.preventDefault()}}validate(t){if(this.pValidateOnly){let o=this.el.nativeElement.value;if(o&&!this.regex.test(o))return{validatePattern:!1}}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","pKeyFilter",""]],hostAttrs:[1,"p-element"],hostBindings:function(t,o){1&t&&e.NdJ("input",function(l){return o.onInput(l)})("keypress",function(l){return o.onKeyPress(l)})("paste",function(l){return o.onPaste(l)})},inputs:{pValidateOnly:"pValidateOnly",pattern:["pKeyFilter","pattern"]},outputs:{ngModelChange:"ngModelChange"},features:[e._Bn([ke])]}),i})(),Ye=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez]]}),i})(),$e=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[b.R],imports:[d.ez,He,De.j,s.u5,M.j,Qe.ON,y.hJ,w.T,A.q4,Be.m,Ge.I,v._8,P.O,_.JF,S.z,f.LU,je,s.UX,Ye]}),i})()}}]);