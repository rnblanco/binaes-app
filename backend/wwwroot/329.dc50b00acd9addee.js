"use strict";(self.webpackChunkpk_thunder_frontend=self.webpackChunkpk_thunder_frontend||[]).push([[329],{5329:(_e,v,s)=>{s.r(v),s.d(v,{EventsModule:()=>he});var d=s(6895),u=s(2248),b=s(2959),c=s(8203),p=s(6894),e=s(8274),x=s(3564),E=s(7114),r=s(433),C=s(1740),S=s(805),g=s(5593),T=s(1795),w=s(5722),J=s(7011),y=s(585),P=s(3388),N=s(5047),m=s(3608),M=s(529),A=s(3054),h=s(8783);function U(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.delete(null==i?null:i.id_Objetivo))}),e._uU(1," Eliminar "),e.qZA()}}const F=function(){return{borderTopLeftRadius:"6px",borderBottomLeftRadius:"6px"}},O=function(){return{standalone:!0}};function Z(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"p-tabPanel",7)(1,"div",4)(2,"textarea",8),e.NdJ("ngModelChange",function(i){const _=e.CHM(t).$implicit;return e.KtG(_.Objetivo=i)}),e.qZA(),e.TgZ(3,"button",9),e.NdJ("click",function(){const l=e.CHM(t).$implicit,_=e.oxw(2);let f;return e.KtG(_.add(null!==(f=null==l?null:l.Objetivo)&&void 0!==f?f:"",null==l?null:l.id_Objetivo))}),e._uU(4," Editar "),e.qZA(),e.YNc(5,U,2,0,"button",10),e.qZA()()}if(2&a){const t=o.$implicit,n=o.index,i=e.oxw(2);e.MGl("header","Objetivo ",n+1,""),e.Q6J("selected",0===n),e.xp6(2),e.Akn(e.DdM(9,F)),e.Q6J("name",t.Objetivo)("ngModel",t.Objetivo)("ngModelOptions",e.DdM(10,O)),e.xp6(1),e.Q6J("disabled",0===(null==t||null==t.Objetivo?null:t.Objetivo.length)),e.xp6(2),e.Q6J("ngIf",i.canDelete)}}function I(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"p-tabView",1),e.YNc(1,Z,6,11,"p-tabPanel",2),e.TgZ(2,"p-tabPanel",3)(3,"div",4)(4,"textarea",5),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.objective=i)}),e.qZA(),e.TgZ(5,"button",6),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.add(i.objective))}),e._uU(6," Agregar "),e.qZA()()()()}if(2&a){const t=e.oxw();e.Q6J("scrollable",t.objectives.length>=6),e.xp6(1),e.Q6J("ngForOf",t.objectives),e.xp6(1),e.s9C("pTooltip",t.isDisabled?"Se debe registrar el evento primero":""),e.Q6J("disabled",t.isDisabled),e.xp6(2),e.Akn(e.DdM(12,F)),e.s9C("pTooltip",t.isDisabled?"Se debe registrar el evento primero":""),e.Q6J("ngModel",t.objective)("ngModelOptions",e.DdM(13,O))("disabled",t.isDisabled),e.xp6(1),e.s9C("pTooltip",t.isDisabled?"Se debe registrar el ejemplar primero":""),e.Q6J("disabled",0===(null==t.objective?null:t.objective.length)||t.isDisabled)}}let L=(()=>{class a extends b.H{constructor(){super(),this.objectives=[],this.exemplarText="",this.selectedExemplar=[],this.disabledDates=[],this.dates=[]}ngOnInit(){this.id&&this.loadAll()}loadAll(){this.loading=!0,this.subscription.add(this.catalogService.getByNameWithParams("OBJETIVOSXEVENTO",(new M.LE).set("id_Evento",this.id)).subscribe(t=>{this.objectives=t,this.loading=!1}))}add(t,n){n?this.update(t,n):this.subscription.add(this.catalogService.addOfURL("OBJETIVOSXEVENTO",{id_Evento:this.id,Objetivo:t}).subscribe(()=>{this.messageService.setPayload({type:"success",title:"\xa1Exito!",body:"El objetivo fue agregado correctamente"}),this.objective="",setTimeout(()=>{this.loadAll()},200)},()=>{this.messageService.setPayload({type:"error",title:"\xa1Error!",body:"El objetivo no fue agregado"})}))}update(t,n){this.subscription.add(this.catalogService.updateOfURL(`OBJETIVOSXEVENTO/${n}`,{id_Objetivo:n,id_Evento:this.id,Objetivo:t}).subscribe(()=>{this.messageService.setPayload({type:"success",title:"\xa1Exito!",body:"El objetivo fue editado correctamente"})},()=>{this.messageService.setPayload({type:"error",title:"\xa1Error!",body:"El objetivo no fue editado"})}))}delete(t){this.subscription.add(this.catalogService.deleteOfURL(`OBJETIVOSXEVENTO/${t}`).subscribe(()=>{this.messageService.setPayload({type:"success",title:"\xa1Exito!",body:"El evento fue eliminado con \xe9xito"}),this.loadAll()},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo eliminar el evento"})}))}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-objectives"]],inputs:{id:"id",canDelete:"canDelete",isDisabled:"isDisabled"},features:[e.qOj],decls:1,vars:1,consts:[[3,"scrollable",4,"ngIf"],[3,"scrollable"],[3,"header","selected",4,"ngFor","ngForOf"],["header","Nuevo objetivo","tooltipPosition","top",3,"disabled","pTooltip"],[1,"p-inputgroup"],["pInputTextarea","","required","","placeholder","Ej. 'Con este evento se busca lograr...'","name","objective","tooltipPosition","top",3,"ngModel","ngModelOptions","disabled","pTooltip","ngModelChange"],["pButton","","type","button","tooltipPosition","top",3,"disabled","pTooltip","click"],[3,"header","selected"],["pInputTextarea","","required","","placeholder","Ej. Con este evento se busca lograr...",3,"name","ngModel","ngModelOptions","ngModelChange"],["pButton","","type","button",3,"disabled","click"],["pButton","","type","button","class","p-button-danger",3,"click",4,"ngIf"],["pButton","","type","button",1,"p-button-danger",3,"click"]],template:function(t,n){1&t&&e.YNc(0,I,7,14,"p-tabView",0),2&t&&e.Q6J("ngIf",!n.loading)},dependencies:[d.sg,d.O5,r.Fj,r.JJ,r.Q7,r.On,g.Hq,A.g,h.xf,h.x4,m.u],encapsulation:2}),a})();var Q=s(3026),j=s(4178);function R(a,o){1&a&&e._UZ(0,"app-loading",3)}function B(a,o){if(1&a&&(e.TgZ(0,"form",4,5)(2,"div",6),e._UZ(3,"app-objectives",7),e.qZA()()),2&a){const t=e.oxw();e.xp6(3),e.Q6J("id",t.id)("canDelete",t.user.id_rolUsuario===t.SUPER_ADMIN)("isDisabled",t.isNew)}}function V(a,o){1&a&&e._UZ(0,"app-loading",3)}function H(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",27)(1,"label"),e._uU(2,"Estado:"),e.qZA(),e.TgZ(3,"input",28),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.readableStatus=i)}),e.qZA()()}if(2&a){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.readableStatus)("disabled",!0)}}function z(a,o){if(1&a&&(e._UZ(0,"img",30),e.ALo(1,"photo")),2&a){const t=e.oxw(3);let n;e.s9C("src",e.lcZ(1,2,t.uploadFile.uploadedFile[0]),e.LSH),e.s9C("alt",null!==(n=t.uploadFile.uploadedFile[0])&&void 0!==n?n:"No disponible")}}function G(a,o){if(1&a&&e.YNc(0,z,2,4,"img",29),2&a){const t=e.oxw(2);e.Q6J("ngIf",t.uploadFile.uploadedFile[0]&&!t.uploadFile.selectedfiles[0])}}function Y(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",31)(1,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.delete())}),e.qZA()()}if(2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("loading",t.deleteLoading)}}const K=function(a){return{"p-sm-6":a}},$=function(a,o){return{"p-col-6 p-sm-9":a,"p-col-12":o}};function k(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"form",4,8)(2,"div",9)(3,"label"),e._uU(4,"Nombre del evento:"),e.qZA(),e.TgZ(5,"div",10)(6,"input",11),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.title=i)}),e.qZA()()(),e.TgZ(7,"div",12)(8,"label"),e._uU(9,"Capacidad del evento:"),e.qZA(),e.TgZ(10,"p-inputNumber",13),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.areaSelect.capacity=i)}),e.qZA()(),e.TgZ(11,"div",14)(12,"label"),e._uU(13,"\xc1rea:"),e.qZA(),e.TgZ(14,"p-multiSelect",15,16),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.areaSelect.selectedArea=i)})("onFilter",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.areaSelect.areaFilter(i))})("onChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.areaSelect.areaChange(i))}),e.qZA()(),e.TgZ(16,"div",17)(17,"label"),e._uU(18,"Rango de fechas:"),e.qZA(),e.TgZ(19,"p-calendar",18),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.areaSelect.dates=i)})("onSelect",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onDateChange())}),e.qZA()(),e.YNc(20,H,4,2,"div",19),e.TgZ(21,"div",20)(22,"label"),e._uU(23,"Logo del evento:"),e.qZA(),e.TgZ(24,"p-fileUpload",21),e.NdJ("onSelect",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.uploadFile.onSelectFile(i))})("onUpload",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.uploadFile.onUpload(i))}),e.YNc(25,G,1,1,"ng-template",22),e.qZA()(),e.TgZ(26,"div",23)(27,"div",24)(28,"button",25),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.add())}),e.ALo(29,"addOrEdit"),e.qZA()(),e.YNc(30,Y,2,1,"div",26),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.title),e.xp6(4),e.MGl("suffix"," persona",1!==t.areaSelect.capacity?"s":"",""),e.Q6J("disabled",!0)("ngModel",t.areaSelect.capacity)("showButtons",!0)("min",0)("max",1e3),e.xp6(4),e.Q6J("options",t.areaSelect.areas)("ngModel",t.areaSelect.selectedArea)("showToggleAll",!1)("showClear",!0)("resetFilterOnHide",!0),e.xp6(2),e.Q6J("ngClass",e.VKq(28,K,t.isNew)),e.xp6(3),e.Q6J("disabledDates",t.areaSelect.disabledDates)("ngModel",t.areaSelect.dates)("minDate",t.minDate)("maxDate",t.maxDate)("selectOtherMonths",!0),e.xp6(1),e.Q6J("ngIf",!t.isNew),e.xp6(4),e.Q6J("showUploadButton",!1)("showCancelButton",!1),e.xp6(3),e.Q6J("ngClass",e.WLB(30,$,t.user.id_rolUsuario===t.SUPER_ADMIN&&!t.isNew,t.isNew||t.user.id_rolUsuario!==t.SUPER_ADMIN)),e.xp6(1),e.Q6J("loading",t.addLoading)("label",e.lcZ(29,26,t.isNew))("disabled",!t.formIsValid),e.xp6(2),e.Q6J("ngIf",t.user.id_rolUsuario===t.SUPER_ADMIN&&!t.isNew)}}let D=(()=>{class a extends b.H{constructor(t,n,i){super(),this.route=t,this.uploadFile=n,this.areaSelect=i,this.SUPER_ADMIN=p.G.SUPER_ADMIN,this.isNew=!0,this.loadedStatus=!0,this.minDate=new Date,this.addLoading=!1,this.deleteLoading=!1}ngOnInit(){this.loadAll(),this.user=this.authService.storagedUser,this.breadcrumbService.setItems(this.getBreadCrumbs())}get formIsValid(){return""!==this.title&&this.areaSelect.selectedArea?.length>0&&void 0!==this.areaSelect.dates[0]&&void 0!==this.areaSelect.dates[1]&&(void 0!==this.uploadFile.uploadedFiles||this.uploadFile.uploadedFile?.length>0)}changeStatus(){this.readableStatus=this.selectedStatus?"Reservado":"Finalizado"}loadAll(){this.user.id_rolUsuario===p.G.USER&&(this.messageService.setPayload({type:"warn",title:"Error",body:"No tienes autorizaci\xf3n para ver esta informaci\xf3n"}),setTimeout(()=>{this.router.navigate([c.u.eventsPage])},50)),this.subscription.add(this.route.params.subscribe(({id:t})=>{this.loading=!0,this.areaSelect.loadAreas(),t?(this.id=t,this.loadInfo()):this.loading=!1}))}loadInfo(){this.subscription.add(this.catalogService.getByNameWithParams(`EVENTO/${this.id}`).subscribe(t=>{t&&(this.isNew=!1),this.id=t.id_Evento,this.areaSelect.selectedArea.push(t.AREA.id_Area),this.areaSelect.dates=[new Date(t.fh_Inicio),new Date(t.fh_Finalizacion)],this.maxDate=new Date(t.fh_Finalizacion),this.minDate=new Date(t.fh_Inicio),this.title=t.titulo,this.areaSelect.capacity=t.capacidad,this.selectedStatus=t.aprobado,this.loadedStatus=t.aprobado,this.changeStatus(),this.uploadFile.uploadedFile.push(t.imagen),setTimeout(()=>{this.loading=!1},200)},()=>{this.loading=!1,this.router.navigate([c.u.eventPage])}))}add(){this.isNew?(void 0!==this.uploadFile.uploadedFiles&&this.uploadFile.uploadFile(),this.addLoading=!0,this.subscription.add(this.catalogService.addOfURL("EVENTO",{imagen:this.uploadFile.varbinaryImage,titulo:this.title,capacidad:this.areaSelect.capacity,fh_Inicio:this.areaSelect.dates[0],fh_Finalizacion:this.areaSelect.dates[1],id_areaRealizacion:this.areaSelect.selectedArea[0],aprobado:!0}).subscribe(()=>{this.messageService.setPayload({type:"success",title:"\xa1\xc9xito!",body:"El evento fue a\xf1adido satifactoriamente"}),setTimeout(()=>{this.router.navigate([c.u.eventsPage])},200),this.addLoading=!1},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo a\xf1adir el evento"}),this.addLoading=!1}))):this.update()}update(){void 0!==this.uploadFile.uploadedFiles&&this.uploadFile.uploadFile(),this.addLoading=!0,this.subscription.add(this.catalogService.updateOfURL(`EVENTO/${this.id}`,{imagen:void 0===this.uploadFile.varbinaryImage?btoa(this.uploadFile.uploadedFile[0]):this.uploadFile.varbinaryImage,id_Evento:this.id,titulo:this.title,capacidad:this.areaSelect.capacity,aprobado:this.selectedStatus,fh_Inicio:this.areaSelect.dates[0],fh_Finalizacion:this.areaSelect.dates[1],id_areaRealizacion:this.areaSelect.selectedArea[0]}).subscribe(()=>{this.messageService.setPayload({type:"success",title:"\xa1\xc9xito!",body:"El evento fue editado satifactoriamente"}),setTimeout(()=>{this.router.navigate([c.u.eventsPage])},200),this.addLoading=!1},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo editar el evento"}),this.addLoading=!1}))}delete(){this.deleteLoading=!0,this.subscription.add(this.catalogService.deleteOfURL(`EVENTO/${this.id}`).subscribe(()=>{this.messageService.setPayload({type:"success",title:"\xa1\xc9xito!",body:"El evento fue eliminado con \xe9xito"}),setTimeout(()=>{this.router.navigate([c.u.eventsPage])},200),this.deleteLoading=!1},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo eliminar el evento"}),this.deleteLoading=!1}))}onDateChange(){if(null===this.areaSelect.dates[0]||null===this.areaSelect.dates[1])return;this.isNew||(this.selectedStatus=!(this.areaSelect.dates[1]<this.maxDate)&&this.loadedStatus,this.readableStatus=this.selectedStatus?"Reservado":"Finalizado");let t=[];const n=new Date(this.areaSelect.dates[0].getTime());for(;this.areaSelect.dates[1]>n||this.areaSelect.dates[1].getDate()===n.getDate();)t.push(new Date(n.getTime())),n.setDate(n.getDate()+1);t.forEach(i=>{this.areaSelect.disabledDates.forEach(l=>{i.getDate()!==l.getDate()||(this.areaSelect.dates=[])})})}getBreadCrumbs(){return[{label:"Eventos",routerLink:[this.routeInformation.eventsPage]},{label:"Evento",routerLink:[this.routeInformation.eventPage]}]}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.gz),e.Y36(x.R),e.Y36(E.h))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-event-page"]],features:[e.qOj],decls:6,vars:4,consts:[[1,"card","p-mt-4"],["class","p-d-flex p-ai-center p-jc-center","style","height: 80%",4,"ngIf"],["autocomplete","off","class","p-fluid p-formgrid p-grid p-formgrid-sm p-ml-2 p-mr-2",4,"ngIf"],[1,"p-d-flex","p-ai-center","p-jc-center",2,"height","80%"],["autocomplete","off",1,"p-fluid","p-formgrid","p-grid","p-formgrid-sm","p-ml-2","p-mr-2"],["form2","ngForm"],[1,"p-col-12","p-mb-2"],[3,"id","canDelete","isDisabled"],["form","ngForm"],[1,"p-field","p-col-12","p-sm-8"],[1,"p-input-icon-right"],["name","title","placeholder","Ej. Charla Uso correcto de la BINAES App","pInputText","",3,"ngModel","ngModelChange"],[1,"p-field","p-col-12","p-sm-4"],["pTooltip","La capacidad depende del \xe1rea","tooltipPosition","top","name","capacity","inputId","minmax-buttons","placeholder","Ej. 200 personas",3,"disabled","ngModel","showButtons","min","max","suffix","ngModelChange"],[1,"p-field","p-col-12","p-sm-6","p-mt-2"],["name","selectedArea","defaultLabel","Elige un \xe1rea","optionLabel","nombre","optionValue","id_Area","emptyFilterMessage","No se encontraron \xe1reas","emptyMessage","No se encontraron \xe1reas",3,"options","ngModel","showToggleAll","showClear","resetFilterOnHide","ngModelChange","onFilter","onChange"],["areaMultiSelect",""],[1,"p-field","p-col-12","p-sm-4","p-mt-2",3,"ngClass"],["selectionMode","range","name","dates","dateFormat","dd/mm/yy","placeholder","Elige un rango de fechas para tu evento",3,"disabledDates","ngModel","minDate","maxDate","selectOtherMonths","ngModelChange","onSelect"],["class","p-field p-col-12 p-sm-2 p-mt-2",4,"ngIf"],[1,"p-field","p-col-12","p-mt-2"],["name","demo[]","chooseLabel","Agregar","invalidFileTypeMessageSummary","{0}: Este formato de archivo no es v\xe1lido.","invalidFileTypeMessageDetail","tipos v\xe1lidos: {0}","accept","image/png",3,"showUploadButton","showCancelButton","onSelect","onUpload"],["pTemplate","content"],[1,"p-col-12","p-grid","p-mt-2","p-mt-2","p-ml-0","p-mr-0","p-pl-0","p-pr-0"],[3,"ngClass"],["pButton","","pRipple","","type","button",1,"p-button-success",3,"loading","label","disabled","click"],["class","p-field p-col-6 p-sm-3",4,"ngIf"],[1,"p-field","p-col-12","p-sm-2","p-mt-2"],["type","text","pInputText","","name","eventStatus",3,"ngModel","disabled","ngModelChange"],["style","height:10em","class","p-ml-2",3,"src","alt",4,"ngIf"],[1,"p-ml-2",2,"height","10em",3,"src","alt"],[1,"p-field","p-col-6","p-sm-3"],["pButton","","pRipple","","type","button","label","Eliminar","icon","pi pi-trash",1,"p-button-danger",3,"loading","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,R,1,0,"app-loading",1),e.YNc(2,B,4,3,"form",2),e.qZA(),e.TgZ(3,"div",0),e.YNc(4,V,1,0,"app-loading",1),e.YNc(5,k,31,33,"form",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(2),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading))},dependencies:[d.mk,d.O5,r._Y,r.Fj,r.JJ,r.JL,r.On,r.F,C.o,S.jx,g.Hq,T.H,w.NU,J.N,y.f,P.p,N.Rn,m.u,L,Q.p,j.A],encapsulation:2}),a})();var X=s(9908),q=s(414);function W(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"img",7),e.ALo(2,"photo"),e.BQk()),2&a){const t=e.oxw(2).rowData;e.xp6(1),e.Q6J("src",e.lcZ(2,1,null==t?null:t.imagen),e.LSH)}}function ee(a,o){if(1&a&&(e.ynx(0),e._uU(1),e.ALo(2,"titlecase"),e.BQk()),2&a){const t=e.oxw(2).rowData;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==t?null:t.titulo)," ")}}function te(a,o){if(1&a&&(e.ynx(0),e._uU(1),e.ALo(2,"titlecase"),e.BQk()),2&a){const t=e.oxw(2).rowData;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==t||null==t.AREA?null:t.AREA.nombre)," ")}}function ae(a,o){if(1&a&&(e.ynx(0),e._uU(1),e.BQk()),2&a){const t=e.oxw(2).rowData;e.xp6(1),e.hij(" ",null==t?null:t.capacidad," ")}}function ne(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"div",8)(2,"span"),e._uU(3),e.qZA()(),e.BQk()),2&a){const t=e.oxw(2).rowData;e.xp6(2),e.Gre("'p-pt-1 p-pb-1 aprove-badge ",null!=t&&t.aprobado?"Reservado":"Finalizado","s"),e.xp6(1),e.hij("",null!=t&&t.aprobado?"Reservado":"Finalizado","s")}}function ie(a,o){if(1&a&&(e.ynx(0),e._uU(1),e.ALo(2,"date"),e.BQk()),2&a){const t=e.oxw(2).rowData;e.xp6(1),e.hij(" ",e.xi3(2,1,null==t?null:t.fh_Inicio,"dd-MM-yyyy")," ")}}function oe(a,o){if(1&a&&(e.ynx(0),e._uU(1),e.ALo(2,"date"),e.BQk()),2&a){const t=e.oxw(2).rowData;e.xp6(1),e.hij(" ",e.xi3(2,1,null==t?null:t.fh_Finalizacion,"dd-MM-yyyy")," ")}}function le(a,o){if(1&a&&(e.ynx(0),e._uU(1),e.BQk()),2&a){const t=e.oxw().$implicit,n=e.oxw().rowData;e.xp6(1),e.hij(" ",n[t.field]," ")}}function se(a,o){if(1&a&&(e.TgZ(0,"td",4),e.YNc(1,W,3,3,"ng-container",5),e.YNc(2,ee,3,3,"ng-container",5),e.YNc(3,te,3,3,"ng-container",5),e.YNc(4,ae,2,1,"ng-container",5),e.YNc(5,ne,4,4,"ng-container",5),e.YNc(6,ie,3,4,"ng-container",5),e.YNc(7,oe,3,4,"ng-container",5),e.YNc(8,le,2,1,"ng-container",6),e.qZA()),2&a){const t=o.$implicit;e.Udp("width",t.width,"px"),e.Q6J("ngSwitch",t.field),e.xp6(1),e.Q6J("ngSwitchCase","imagen"),e.xp6(1),e.Q6J("ngSwitchCase","titulo"),e.xp6(1),e.Q6J("ngSwitchCase","AREA.nombre"),e.xp6(1),e.Q6J("ngSwitchCase","capacidad"),e.xp6(1),e.Q6J("ngSwitchCase","aprobado"),e.xp6(1),e.Q6J("ngSwitchCase","fh_Inicio"),e.xp6(1),e.Q6J("ngSwitchCase","fh_Finalizacion")}}function de(a,o){1&a&&e.YNc(0,se,9,10,"td",3),2&a&&e.Q6J("ngForOf",o.columns)}const re=[{path:"",component:(()=>{class a extends X.c{constructor(){super(),this.USER=p.G.USER,this.cols=[{field:"titulo",header:"T\xedtulo",width:100},{field:"imagen",header:"Imagen",width:100},{field:"AREA.nombre",header:"\xc1rea",width:100},{field:"capacidad",header:"Capacidad",width:10},{field:"aprobado",header:"Estado",width:10},{field:"fh_Inicio",header:"Inicio",width:100},{field:"fh_Finalizacion",header:"Fin",width:100}]}ngOnInit(){this.loadAll(),this.user=this.authService.storagedUser,this.breadcrumbService.setItems(this.getBreadCrumbs())}loadAll(){this.list=[],this.loading=!0,this.getPaginationParams(),this.subscription.add(this.catalogService.getByNameWithParams("EVENTO",this.httpParams).subscribe(t=>{this.pagination=t.meta,this.currentPage=this.pagination.currentPage,this.list=t.data,this.loading=!1},()=>this.loading=!1))}onLazyLoad(t){this.paginate(t),this.loadAll()}onNew(){this.user.id_rolUsuario!==p.G.USER&&this.router.navigate([`${this.routeInformation.eventPage}/`])}onRowSelect({data:t}){this.user.id_rolUsuario!==p.G.USER&&this.router.navigate([`${this.routeInformation.eventPage}/${t.id_Evento}/`])}getBreadCrumbs(){return[{label:"Eventos",routerLink:[this.routeInformation.eventsPage]}]}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-events-page"]],features:[e.qOj],decls:3,vars:8,consts:[[1,"p-mt-4"],["newButtonLabel","Nuevo evento","type","eventos",3,"reloading","globalFilter","rows","pagination","loading","cols","list","showNewButton","onLazyLoad","onRowSelect","onNewClick"],["pTemplate","body"],["class","text-center",3,"ngSwitch","width",4,"ngFor","ngForOf"],[1,"text-center",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[2,"height","8rem",3,"src"],[1,"text-center"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"table-card",1),e.NdJ("onLazyLoad",function(l){return n.onLazyLoad(l)})("onRowSelect",function(l){return n.onRowSelect(l)})("onNewClick",function(){return n.onNew()}),e.YNc(2,de,1,1,"ng-template",2),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("reloading",n.loading)("globalFilter",n.globalFilter)("rows",n.rows)("pagination",n.pagination)("loading",n.loading)("cols",n.cols)("list",n.list)("showNewButton",n.user.id_rolUsuario!==n.USER))},dependencies:[d.sg,d.RF,d.n9,d.ED,q.r,S.jx,d.rS,d.uU,j.A],encapsulation:2}),a})()},{path:"event",component:D},{path:"event/:id",component:D}];let ce=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[u.Bz.forChild(re),u.Bz]}),a})();var pe=s(6311),ue=s(8433),ge=s(4466),me=s(9423);let he=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[x.R,E.h],imports:[d.ez,ce,pe.j,r.u5,C.j,ue.ON,g.hJ,T.T,w.q4,ge.m,me.I,y._8,P.O,M.JF,N.L$,A.A,h.LU,m.z]}),a})()}}]);