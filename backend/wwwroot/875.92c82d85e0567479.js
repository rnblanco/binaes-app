"use strict";(self.webpackChunkpk_thunder_frontend=self.webpackChunkpk_thunder_frontend||[]).push([[875],{9875:(te,u,l)=>{l.r(u),l.d(u,{AreasModule:()=>ee});var s=l(6895),m=l(2248),g=l(2959),p=l(6894),d=l(8203),e=l(8274),h=l(8683);let _=(()=>{class a extends g.H{constructor(){super(),this.areaTypeText="",this.selectedAreaType=[]}areaTypeFilter(t){this.areaTypeText=t.filter}areaTypeChange(t){this.selectedAreaType=[t.itemValue]}addAreaType(t){this.subscription.add(this.catalogService.addOfURL("TIPOAREA",{tipoArea1:this.areaTypeText}).subscribe(o=>{this.loadAreaTypes(),this.selectedAreaType=[o.id_tipoArea],t.hide()},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo a\xf1adir el tipo de \xe1rea"})}))}loadAreaTypes(){this.subscription.add(this.catalogService.getByNameWithParams("TIPOAREA").subscribe(t=>{this.areaTypes=t}))}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["root"]],features:[e.qOj],decls:0,vars:0,template:function(t,o){},encapsulation:2}),a})(),f=(()=>{class a extends g.H{constructor(){super(),this.floorAreaText="",this.selectedFloorArea=[]}floorAreaFilter(t){this.floorAreaText=t.filter}floorAreaChange(t){this.selectedFloorArea=[t.itemValue]}addFloorArea(t){this.subscription.add(this.catalogService.addOfURL("PISOAREA",{pisoArea1:this.floorAreaText}).subscribe(o=>{this.loadFloorAreas(),this.selectedFloorArea=[o.id_pisoArea],t.hide()},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo a\xf1adir el tipo de \xe1rea"})}))}loadFloorAreas(){this.subscription.add(this.catalogService.getByNameWithParams("PISOAREA").subscribe(t=>{this.floorAreas=t}))}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["root"]],features:[e.qOj],decls:0,vars:0,template:function(t,o){},encapsulation:2}),a})();var c=l(433),A=l(1740),C=l(805),T=l(5593),S=l(1795),y=l(5722),F=l(7011),x=l(5047),b=l(3054),w=l(3026);function M(a,i){1&a&&e._UZ(0,"app-loading",3)}function N(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t),e.oxw();const n=e.MAs(25),r=e.oxw();return e.KtG(r.areaTypeSelectComponent.addAreaType(n))}),e.qZA()}if(2&a){const t=e.oxw(2);e.MGl("label","Agregar '",t.areaTypeSelectComponent.areaTypeText,"'")}}function U(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t),e.oxw();const n=e.MAs(31),r=e.oxw();return e.KtG(r.areaFloorSelectComponent.addFloorArea(n))}),e.qZA()}if(2&a){const t=e.oxw(2);e.MGl("label","Agregar '",t.areaFloorSelectComponent.floorAreaText,"'")}}function E(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"div",26)(1,"button",27),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.delete())}),e.qZA()()}if(2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("loading",t.deleteLoading)}}const R=function(a,i){return{"p-col-6 p-sm-9":a,"p-col-12":i}};function L(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"form",4,5)(2,"div",6)(3,"label"),e._uU(4,"Nombre (m\xe1ximo 30 caracteres):"),e.qZA(),e.TgZ(5,"div",7)(6,"input",8),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.name=n)}),e.qZA()()(),e.TgZ(7,"div",6)(8,"label"),e._uU(9,"Descripci\xf3n:"),e.qZA(),e.TgZ(10,"div",7)(11,"textarea",9),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.description=n)}),e.qZA()()(),e.TgZ(12,"div",10)(13,"label"),e._uU(14,"Encargado:"),e.qZA(),e.TgZ(15,"p-multiSelect",11,12),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.userSelect.selectedUser=n)})("onFilter",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.userSelect.userFilter(n))})("onChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.userSelect.userChange(n))}),e.qZA()(),e.TgZ(17,"div",13)(18,"label"),e._uU(19,"Capacidad del \xe1rea:"),e.qZA(),e.TgZ(20,"p-inputNumber",14),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.capacity=n)}),e.qZA()(),e.TgZ(21,"div",15)(22,"label"),e._uU(23,"Tipo de \xe1rea:"),e.qZA(),e.TgZ(24,"p-multiSelect",16,17),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.areaTypeSelectComponent.selectedAreaType=n)})("onFilter",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.areaTypeSelectComponent.areaTypeFilter(n))})("onChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.areaTypeSelectComponent.areaTypeChange(n))}),e.YNc(26,N,1,1,"ng-template",18),e.qZA()(),e.TgZ(27,"div",15)(28,"label"),e._uU(29,"Piso:"),e.qZA(),e.TgZ(30,"p-multiSelect",19,20),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.areaFloorSelectComponent.selectedFloorArea=n)})("onFilter",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.areaFloorSelectComponent.floorAreaFilter(n))})("onChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.areaFloorSelectComponent.floorAreaChange(n))}),e.YNc(32,U,1,1,"ng-template",18),e.qZA()(),e.TgZ(33,"div",21)(34,"div",22)(35,"button",23),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.add())}),e.ALo(36,"addOrEdit"),e.qZA()(),e.YNc(37,E,2,1,"div",24),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.name),e.xp6(5),e.Q6J("ngModel",t.description)("autoResize",!0),e.xp6(4),e.Q6J("options",t.userSelect.users)("ngModel",t.userSelect.selectedUser)("showToggleAll",!1)("showClear",!0)("resetFilterOnHide",!0),e.xp6(5),e.MGl("suffix"," persona",1!==t.capacity?"s":"",""),e.Q6J("ngModel",t.capacity)("showButtons",!0)("min",0)("max",1e3),e.xp6(4),e.Q6J("options",t.areaTypeSelectComponent.areaTypes)("ngModel",t.areaTypeSelectComponent.selectedAreaType)("showToggleAll",!1)("showClear",!0)("resetFilterOnHide",!0),e.xp6(6),e.Q6J("options",t.areaFloorSelectComponent.floorAreas)("ngModel",t.areaFloorSelectComponent.selectedFloorArea)("showToggleAll",!1)("showClear",!0)("resetFilterOnHide",!0),e.xp6(4),e.Q6J("ngClass",e.WLB(30,R,t.user.id_rolUsuario===t.SUPER_ADMIN&&!t.isNew,t.isNew||t.user.id_rolUsuario!==t.SUPER_ADMIN)),e.xp6(1),e.Q6J("loading",t.addLoading)("label",e.lcZ(36,28,t.isNew))("disabled",!t.formIsValid),e.xp6(2),e.Q6J("ngIf",t.user.id_rolUsuario===t.SUPER_ADMIN&&!t.isNew)}}let v=(()=>{class a extends g.H{constructor(t,o,n,r){super(),this.route=t,this.userSelect=o,this.areaTypeSelectComponent=n,this.areaFloorSelectComponent=r,this.SUPER_ADMIN=p.G.SUPER_ADMIN,this.isNew=!0,this.addLoading=!1,this.deleteLoading=!1}ngOnInit(){this.loadAll(),this.user=this.authService.storagedUser,this.breadcrumbService.setItems(this.getBreadCrumbs())}get formIsValid(){return""!==this.name&&""!==this.description&&this.capacity>0&&this.userSelect.selectedUser?.length>0&&this.areaTypeSelectComponent.selectedAreaType?.length>0&&this.areaFloorSelectComponent.selectedFloorArea?.length>0}loadAll(){this.subscription.add(this.route.params.subscribe(({id:t})=>{this.loading=!0,this.areaTypeSelectComponent.loadAreaTypes(),this.userSelect.loadUsers(!0),this.areaFloorSelectComponent.loadFloorAreas(),t?(this.id=t,this.loadInfo()):this.loading=!1}))}loadInfo(){this.subscription.add(this.catalogService.getByNameWithParams(`AREA/${this.id}`).subscribe(t=>{t.nombre&&(this.isNew=!1),this.id=t.id_Area,this.name=t.nombre,this.description=t.descripcion,this.capacity=t.capacidad,this.userSelect.selectedUser=[t.USUARIO.id_Usuario],this.areaTypeSelectComponent.selectedAreaType=[t.TIPOAREA?.id_tipoArea],this.areaFloorSelectComponent.selectedFloorArea=[t.PISOAREA.id_pisoArea],setTimeout(()=>{this.loading=!1},200)},()=>{this.loading=!1,this.router.navigate([d.u.areasPage])}))}add(){this.isNew?(this.addLoading=!0,this.subscription.add(this.catalogService.addOfURL("AREA",{nombre:this.name,descripcion:this.description,capacidad:this.capacity,responsable:this.userSelect.selectedUser[0],id_pisoArea:this.areaFloorSelectComponent.selectedFloorArea[0],id_tipoArea:this.areaTypeSelectComponent.selectedAreaType[0]}).subscribe(()=>{this.messageService.setPayload({type:"success",title:"\xa1Exito!",body:"El \xe1rea fue a\xf1adida satifactoriamente"}),setTimeout(()=>{this.router.navigate([d.u.areasPage])},200),this.addLoading=!1},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo a\xf1adir el \xe1rea"}),this.addLoading=!1}))):this.update()}update(){this.addLoading=!0,this.subscription.add(this.catalogService.updateOfURL(`AREA/${this.id}`,{id_Area:this.id,nombre:this.name,descripcion:this.description,capacidad:this.capacity,responsable:this.userSelect.selectedUser[0],id_pisoArea:this.areaFloorSelectComponent.selectedFloorArea[0],id_tipoArea:this.areaTypeSelectComponent.selectedAreaType[0]}).subscribe(()=>{this.messageService.setPayload({type:"success",title:"\xa1Exito!",body:"El \xe1rea fue editada satifactoriamente"}),setTimeout(()=>{this.router.navigate([d.u.areasPage])},200),this.addLoading=!1},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo editar el \xe1rea"}),this.addLoading=!1}))}delete(){this.deleteLoading=!0,this.subscription.add(this.catalogService.deleteOfURL(`AREA/${this.id}`).subscribe(()=>{this.messageService.setPayload({type:"success",title:"\xa1Exito!",body:"El \xe1rea fue eliminada con \xe9xito"}),setTimeout(()=>{this.router.navigate([d.u.areasPage])},200),this.deleteLoading=!1},()=>{this.messageService.setPayload({type:"warn",title:"Error",body:"No se pudo eliminar el \xe1rea"}),this.deleteLoading=!1}))}getBreadCrumbs(){return[{label:"\xc1reas",routerLink:[this.routeInformation.areasPage]},{label:"\xc1rea",routerLink:[this.routeInformation.areaPage]}]}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(m.gz),e.Y36(h.q),e.Y36(_),e.Y36(f))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-area-page"]],features:[e.qOj],decls:3,vars:2,consts:[[1,"card","p-mt-4"],["class","p-d-flex p-ai-center p-jc-center","style","height: 80%",4,"ngIf"],["autocomplete","off","class","p-fluid p-formgrid p-grid p-formgrid-sm p-ml-2 p-mr-2",4,"ngIf"],[1,"p-d-flex","p-ai-center","p-jc-center",2,"height","80%"],["autocomplete","off",1,"p-fluid","p-formgrid","p-grid","p-formgrid-sm","p-ml-2","p-mr-2"],["form","ngForm"],[1,"p-field","p-col-12"],[1,"p-input-icon-right"],["name","name","placeholder","Ej. \xc1rea de recreaci\xf3n","pInputText","","maxlength","30",3,"ngModel","ngModelChange"],["name","description","placeholder","Ej. Espacio para desarrollar las habilidades sociales","pInputTextarea","",3,"ngModel","autoResize","ngModelChange"],[1,"p-field","p-col-12","p-sm-8","p-mt-2"],["name","selectedUser","defaultLabel","Elige un encargado","optionLabel","nombre","optionValue","id_Usuario","emptyFilterMessage","No se encontraron resultados",3,"options","ngModel","showToggleAll","showClear","resetFilterOnHide","ngModelChange","onFilter","onChange"],["userMultiSelect",""],[1,"p-field","p-col-12","p-sm-4","p-mt-2"],["name","capacity","inputId","minmax-buttons","placeholder","Ej. 200 personas",3,"ngModel","showButtons","min","max","suffix","ngModelChange"],[1,"p-field","p-col-12","p-sm-6","p-mt-2"],["name","selectedAreaType","defaultLabel","Elige un tipo","optionLabel","tipoArea1","optionValue","id_tipoArea",3,"options","ngModel","showToggleAll","showClear","resetFilterOnHide","ngModelChange","onFilter","onChange"],["areaTypeMultiSelect",""],["pTemplate","emptyfilter"],["name","selectedFloorArea","defaultLabel","Elige un piso","optionLabel","pisoArea1","optionValue","id_pisoArea",3,"options","ngModel","showToggleAll","showClear","resetFilterOnHide","ngModelChange","onFilter","onChange"],["floorAreaMultiSelect",""],[1,"p-col-12","p-grid","p-mt-4","p-ml-0","p-mr-0","p-pl-0","p-pr-0"],[1,"p-field",3,"ngClass"],["pButton","","pRipple","","type","button",1,"p-button-success",3,"loading","label","disabled","click"],["class","p-field p-col-6 p-sm-3",4,"ngIf"],["pButton","","pRipple","","type","button",1,"p-button-primary",3,"label","click"],[1,"p-field","p-col-6","p-sm-3"],["pButton","","pRipple","","type","button","label","Eliminar","icon","pi pi-trash",1,"p-button-danger",3,"loading","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,M,1,0,"app-loading",1),e.YNc(2,L,38,33,"form",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading))},dependencies:[s.mk,s.O5,c._Y,c.Fj,c.JJ,c.JL,c.nD,c.On,c.F,A.o,C.jx,T.Hq,S.H,y.NU,F.N,x.Rn,b.g,w.p],encapsulation:2}),a})();var Z=l(9908),I=l(414),P=l(7147);function J(a,i){if(1&a&&(e.ynx(0),e._uU(1),e.BQk()),2&a){const t=e.oxw(2).rowData;e.xp6(1),e.hij(" ",null==t?null:t.capacidad," ")}}function O(a,i){if(1&a&&(e.ynx(0),e._UZ(1,"p-chip",7),e.ALo(2,"titlecase"),e.BQk()),2&a){const t=e.oxw(2).rowData;e.xp6(1),e.Q6J("image","assets/images/icons/user-circle.png")("label",e.lcZ(2,2,null==t||null==t.USUARIO?null:t.USUARIO.nombre))}}function H(a,i){if(1&a&&(e.ynx(0),e._uU(1),e.BQk()),2&a){const t=e.oxw(2).rowData;e.xp6(1),e.hij(" ",null==t?null:t.descripcion," ")}}function B(a,i){if(1&a&&(e.ynx(0),e._uU(1),e.BQk()),2&a){const t=e.oxw(2).rowData;e.xp6(1),e.hij(" ",null==t?null:t.nombre," ")}}function Q(a,i){if(1&a&&(e.ynx(0),e._uU(1),e.ALo(2,"titlecase"),e.BQk()),2&a){const t=e.oxw().$implicit,o=e.oxw().rowData;e.xp6(1),e.hij(" ",e.lcZ(2,1,o[t.field])," ")}}function G(a,i){if(1&a&&(e.TgZ(0,"td",4),e.YNc(1,J,2,1,"ng-container",5),e.YNc(2,O,3,4,"ng-container",5),e.YNc(3,H,2,1,"ng-container",5),e.YNc(4,B,2,1,"ng-container",5),e.YNc(5,Q,3,3,"ng-container",6),e.qZA()),2&a){const t=i.$implicit;e.Udp("width",t.width,"px"),e.Q6J("ngSwitch",t.field),e.xp6(1),e.Q6J("ngSwitchCase","capacidad"),e.xp6(1),e.Q6J("ngSwitchCase","USUARIO.nombre"),e.xp6(1),e.Q6J("ngSwitchCase","descripcion"),e.xp6(1),e.Q6J("ngSwitchCase","nombre")}}function j(a,i){1&a&&e.YNc(0,G,6,7,"td",3),2&a&&e.Q6J("ngForOf",i.columns)}const Y=[{path:"",component:(()=>{class a extends Z.c{constructor(){super(),this.USER=p.G.USER,this.cols=[{field:"nombre",header:"Nombre",width:150},{field:"descripcion",header:"Descripci\xf3n",width:200},{field:"USUARIO.nombre",header:"Responsable",width:100},{field:"capacidad",header:"Capacidad",width:100}]}ngOnInit(){this.loadAll(),this.user=this.authService.storagedUser,this.breadcrumbService.setItems(this.getBreadCrumbs())}loadAll(){this.list=[],this.loading=!0,this.getPaginationParams(),this.subscription.add(this.catalogService.getByNameWithParams("AREA",this.httpParams).subscribe(t=>{this.pagination=t.meta,this.currentPage=this.pagination.currentPage,this.list=t.data,this.loading=!1},()=>this.loading=!1))}onLazyLoad(t){this.paginate(t),this.loadAll()}onNew(){this.user.id_rolUsuario!==p.G.USER&&this.router.navigate([`${this.routeInformation.areaPage}/`])}onRowSelect({data:t}){this.user.id_rolUsuario!==p.G.USER&&this.router.navigate([`${this.routeInformation.areaPage}/${t.id_Area}/`])}getBreadCrumbs(){return[{label:"\xc1reas",routerLink:[this.routeInformation.areasPage]}]}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-areas-page"]],features:[e.qOj],decls:3,vars:8,consts:[[1,"p-mt-4"],["newButtonLabel","Nueva \xe1rea","type","\xe1reas",3,"reloading","globalFilter","rows","pagination","loading","cols","list","showNewButton","onLazyLoad","onRowSelect","onNewClick"],["pTemplate","body"],["class","text-center",3,"ngSwitch","width",4,"ngFor","ngForOf"],[1,"text-center",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["styleClass","p-col-12",3,"image","label"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"table-card",1),e.NdJ("onLazyLoad",function(r){return o.onLazyLoad(r)})("onRowSelect",function(r){return o.onRowSelect(r)})("onNewClick",function(){return o.onNew()}),e.YNc(2,j,1,1,"ng-template",2),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("reloading",o.loading)("globalFilter",o.globalFilter)("rows",o.rows)("pagination",o.pagination)("loading",o.loading)("cols",o.cols)("list",o.list)("showNewButton",o.user.id_rolUsuario!==o.USER))},dependencies:[s.sg,s.RF,s.n9,s.ED,I.r,C.jx,P.A,s.rS],encapsulation:2}),a})()},{path:"area",component:v},{path:"area/:id",component:v}];let K=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[m.Bz.forChild(Y),m.Bz]}),a})();var D=l(6311),z=l(8433),$=l(4466),V=l(9423),W=l(585),X=l(3388),k=l(529),q=l(8783);let ee=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[h.q,_,f],imports:[s.ez,K,D.j,c.u5,A.j,z.ON,T.hJ,S.T,y.q4,$.m,V.I,W._8,X.O,k.JF,x.L$,b.A,q.LU,P.o]}),a})()}}]);